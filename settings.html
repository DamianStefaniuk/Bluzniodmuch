<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bluzniodmuch - Ustawienia</title>
    <link rel="icon" type="image/svg+xml" href="image/title-swear-jar.svg">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Bluzniodmuch</h1>
            <p class="subtitle">Ustawienia synchronizacji</p>
            <nav>
                <a href="index.html">Tablica</a>
                <a href="shop.html">Sklep</a>
                <a href="trophies.html">Trofea</a>
                <a href="calendar.html">Kalendarz</a>
                <a href="settings.html" class="active">Ustawienia</a>
            </nav>
        </header>

        <main>
            <section class="sync-status">
                <h2>Status synchronizacji</h2>
                <div class="status-card" id="syncStatusCard">
                    <div class="status-icon" id="statusIcon">âšª</div>
                    <div class="status-text">
                        <span class="status-label" id="statusLabel">Sprawdzanie...</span>
                        <span class="status-detail" id="statusDetail"></span>
                    </div>
                </div>

                <div class="sync-actions" id="syncActions" style="display: none;">
                    <button class="btn btn-primary" id="syncNowBtn">
                        Synchronizuj teraz
                    </button>
                    <button class="btn btn-secondary" id="disconnectBtn">
                        RozÅ‚Ä…cz
                    </button>
                </div>
            </section>

            <section class="player-selection" id="playerSelectionSection" style="display: none;">
                <h2>TwÃ³j profil gracza</h2>
                <div class="player-selection-info">
                    <p>Wybierz swoje konto gracza. BÄ™dziesz mÃ³gÅ‚ dodawaÄ‡ przekleÅ„stwa i korzystaÄ‡ ze sklepu tylko dla tego gracza.</p>
                </div>
                <div class="form-group">
                    <label for="playerSelect">Zaloguj jako:</label>
                    <select id="playerSelect" class="player-dropdown">
                        <option value="">-- Wybierz gracza --</option>
                    </select>
                </div>
                <div class="current-player-info" id="currentPlayerInfo" style="display: none;">
                    <div class="player-avatar" id="playerAvatar"></div>
                    <div class="player-details">
                        <span class="player-name-display" id="playerNameDisplay"></span>
                        <span class="player-status-display" id="playerStatusDisplay"></span>
                    </div>
                </div>
            </section>

            <section class="sync-setup" id="syncSetup">
                <h2>Konfiguracja GitHub Gist</h2>

                <div class="setup-info">
                    <p>Synchronizacja pozwala wspÃ³Å‚dzieliÄ‡ dane miÄ™dzy urzÄ…dzeniami poprzez GitHub Gist.</p>

                    <div class="steps">
                        <h3>Jak skonfigurowaÄ‡:</h3>
                        <ol>
                            <li>
                                <strong>UtwÃ³rz Personal Access Token:</strong>
                                <ul>
                                    <li>PrzejdÅº do <a href="https://github.com/settings/tokens/new" target="_blank">GitHub â†’ Settings â†’ Developer settings â†’ Personal access tokens â†’ Tokens (classic)</a></li>
                                    <li>Kliknij "Generate new token (classic)"</li>
                                    <li>Nadaj nazwÄ™ np. "Bluzniodmuch"</li>
                                    <li>Zaznacz uprawnienie <code>gist</code></li>
                                    <li>Kliknij "Generate token" i skopiuj token</li>
                                </ul>
                            </li>
                            <li>
                                <strong>Wklej token poniÅ¼ej</strong> - moÅ¼esz utworzyÄ‡ nowy Gist lub podÅ‚Ä…czyÄ‡ istniejÄ…cy
                            </li>
                        </ol>
                    </div>
                </div>

                <div class="setup-form">
                    <div class="form-group">
                        <label for="githubToken">Personal Access Token:</label>
                        <input type="password" id="githubToken" placeholder="ghp_xxxxxxxxxxxx">
                        <button class="btn-icon" id="toggleToken" title="PokaÅ¼/ukryj token">ğŸ‘ï¸</button>
                    </div>

                    <div class="form-group">
                        <label for="gistId">Gist ID (opcjonalnie - zostaw puste aby utworzyÄ‡ nowy):</label>
                        <input type="text" id="gistId" placeholder="np. abc123def456...">
                        <small>JeÅ›li masz juÅ¼ Gist, wklej jego ID z URL: gist.github.com/user/<strong>GIST_ID</strong></small>
                    </div>

                    <div class="form-actions">
                        <button class="btn btn-primary" id="connectBtn">
                            PoÅ‚Ä…cz z GitHub
                        </button>
                        <button class="btn btn-secondary" id="createNewBtn">
                            UtwÃ³rz nowy Gist
                        </button>
                    </div>
                </div>

                <div class="setup-result" id="setupResult" style="display: none;">
                </div>
            </section>

            <section class="data-management" id="dataManagementSection">
                <h2>ZarzÄ…dzanie danymi</h2>

                <div class="auth-required-notice" id="authRequiredNotice">
                    <div class="notice-icon">ğŸ”’</div>
                    <div class="notice-text">
                        <strong>Wymagana autoryzacja</strong>
                        <p>Aby uzyskaÄ‡ dostÄ™p do zarzÄ…dzania danymi, skonfiguruj poÅ‚Ä…czenie z GitHub Gist powyÅ¼ej.</p>
                    </div>
                </div>

                <div class="data-actions" id="dataActionsContainer" style="display: none;">
                    <div class="action-card">
                        <h3>Eksport danych</h3>
                        <p>Pobierz kopiÄ™ zapasowÄ… danych i osiÄ…gniÄ™Ä‡ jako pliki JSON.</p>
                        <div class="export-buttons">
                            <button class="btn btn-secondary" id="exportDataBtn">Eksportuj dane</button>
                            <button class="btn btn-secondary" id="exportAchievementsBtn">Eksportuj osiÄ…gniÄ™cia</button>
                            <button class="btn btn-primary" id="exportAllBtn">Eksportuj wszystko</button>
                        </div>
                    </div>

                    <div class="action-card">
                        <h3>Import danych</h3>
                        <p>PrzywrÃ³Ä‡ dane z plikÃ³w kopii zapasowej. Po imporcie dane zostanÄ… wymuszone dla wszystkich urzÄ…dzeÅ„.</p>
                        <div class="import-fields">
                            <div class="import-field">
                                <label for="importDataFile">Plik danych (scores):</label>
                                <input type="file" id="importDataFile" accept=".json">
                            </div>
                            <div class="import-field">
                                <label for="importAchievementsFile">Plik osiÄ…gniÄ™Ä‡ (opcjonalnie):</label>
                                <input type="file" id="importAchievementsFile" accept=".json">
                            </div>
                            <button class="btn btn-primary" id="importBtn">Importuj i wymuÅ› synchronizacjÄ™</button>
                        </div>
                    </div>

                    <div class="action-card danger">
                        <h3>Resetuj dane lokalne</h3>
                        <p>Usuwa wszystkie lokalne dane. Nie wpÅ‚ywa na dane w Gist.</p>
                        <button class="btn btn-danger" id="resetBtn">Resetuj dane</button>
                    </div>

                    <div class="action-card warning">
                        <h3>Resetuj osiÄ…gniÄ™cia</h3>
                        <p>Usuwa wszystkie zdobyte osiÄ…gniÄ™cia (indywidualne i zespoÅ‚owe).</p>
                        <button class="btn btn-warning" id="resetAchievementsBtn">Resetuj osiÄ…gniÄ™cia</button>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>ZespÃ³Å‚ Wentylacji Â© 2025</p>
        </footer>
    </div>

    <script src="js/data.js"></script>
    <script src="js/shop-items.js"></script>
    <script src="js/month-icons.js"></script>
    <script src="js/year-icons.js"></script>
    <script src="js/achievements.js"></script>
    <script src="js/bonuses.js"></script>
    <script src="js/sync.js"></script>
    <script src="js/settings.js"></script>
</body>
</html>
