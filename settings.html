<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bluzniodmuch - Ustawienia</title>
    <link rel="icon" type="image/svg+xml" href="image/title-swear-jar.svg">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Bluzniodmuch</h1>
            <p class="subtitle">Ustawienia synchronizacji</p>
            <nav>
                <a href="index.html">Tablica</a>
                <a href="shop.html">Sklep</a>
                <a href="trophies.html">Trofea</a>
                <a href="settings.html" class="active">Ustawienia</a>
            </nav>
        </header>

        <main>
            <section class="sync-status">
                <h2>Status synchronizacji</h2>
                <div class="status-card" id="syncStatusCard">
                    <div class="status-icon" id="statusIcon">‚ö™</div>
                    <div class="status-text">
                        <span class="status-label" id="statusLabel">Sprawdzanie...</span>
                        <span class="status-detail" id="statusDetail"></span>
                    </div>
                </div>

                <div class="sync-actions" id="syncActions" style="display: none;">
                    <button class="btn btn-primary" id="syncNowBtn">
                        Synchronizuj teraz
                    </button>
                    <button class="btn btn-secondary" id="disconnectBtn">
                        Roz≈ÇƒÖcz
                    </button>
                </div>
            </section>

            <section class="player-selection" id="playerSelectionSection" style="display: none;">
                <h2>Tw√≥j profil gracza</h2>
                <div class="player-selection-info">
                    <p>Wybierz swoje konto gracza. Bƒôdziesz m√≥g≈Ç dodawaƒá przekle≈Ñstwa i korzystaƒá ze sklepu tylko dla tego gracza.</p>
                </div>
                <div class="form-group">
                    <label for="playerSelect">Zaloguj jako:</label>
                    <select id="playerSelect" class="player-dropdown">
                        <option value="">-- Wybierz gracza --</option>
                    </select>
                </div>
                <div class="current-player-info" id="currentPlayerInfo" style="display: none;">
                    <div class="player-avatar" id="playerAvatar"></div>
                    <div class="player-details">
                        <span class="player-name-display" id="playerNameDisplay"></span>
                        <span class="player-status-display" id="playerStatusDisplay"></span>
                    </div>
                </div>
            </section>

            <section class="sync-setup" id="syncSetup">
                <h2>Konfiguracja GitHub Gist</h2>

                <div class="setup-info">
                    <p>Synchronizacja pozwala wsp√≥≈Çdzieliƒá dane miƒôdzy urzƒÖdzeniami poprzez GitHub Gist.</p>

                    <div class="steps">
                        <h3>Jak skonfigurowaƒá:</h3>
                        <ol>
                            <li>
                                <strong>Utw√≥rz Personal Access Token:</strong>
                                <ul>
                                    <li>Przejd≈∫ do <a href="https://github.com/settings/tokens/new" target="_blank">GitHub ‚Üí Settings ‚Üí Developer settings ‚Üí Personal access tokens ‚Üí Tokens (classic)</a></li>
                                    <li>Kliknij "Generate new token (classic)"</li>
                                    <li>Nadaj nazwƒô np. "Bluzniodmuch"</li>
                                    <li>Zaznacz uprawnienie <code>gist</code></li>
                                    <li>Kliknij "Generate token" i skopiuj token</li>
                                </ul>
                            </li>
                            <li>
                                <strong>Wklej token poni≈ºej</strong> - mo≈ºesz utworzyƒá nowy Gist lub pod≈ÇƒÖczyƒá istniejƒÖcy
                            </li>
                        </ol>
                    </div>
                </div>

                <div class="setup-form">
                    <div class="form-group">
                        <label for="githubToken">Personal Access Token:</label>
                        <input type="password" id="githubToken" placeholder="ghp_xxxxxxxxxxxx">
                        <button class="btn-icon" id="toggleToken" title="Poka≈º/ukryj token">üëÅÔ∏è</button>
                    </div>

                    <div class="form-group">
                        <label for="gistId">Gist ID (opcjonalnie - zostaw puste aby utworzyƒá nowy):</label>
                        <input type="text" id="gistId" placeholder="np. abc123def456...">
                        <small>Je≈õli masz ju≈º Gist, wklej jego ID z URL: gist.github.com/user/<strong>GIST_ID</strong></small>
                    </div>

                    <div class="form-actions">
                        <button class="btn btn-primary" id="connectBtn">
                            Po≈ÇƒÖcz z GitHub
                        </button>
                        <button class="btn btn-secondary" id="createNewBtn">
                            Utw√≥rz nowy Gist
                        </button>
                    </div>
                </div>

                <div class="setup-result" id="setupResult" style="display: none;">
                </div>
            </section>

            <section class="data-management" id="dataManagementSection">
                <h2>ZarzƒÖdzanie danymi</h2>

                <div class="auth-required-notice" id="authRequiredNotice">
                    <div class="notice-icon">üîí</div>
                    <div class="notice-text">
                        <strong>Wymagana autoryzacja</strong>
                        <p>Aby uzyskaƒá dostƒôp do zarzƒÖdzania danymi, skonfiguruj po≈ÇƒÖczenie z GitHub Gist powy≈ºej.</p>
                    </div>
                </div>

                <div class="data-actions" id="dataActionsContainer" style="display: none;">
                    <div class="action-card">
                        <h3>Eksport danych</h3>
                        <p>Pobierz kopiƒô zapasowƒÖ wszystkich danych jako plik JSON.</p>
                        <button class="btn btn-secondary" id="exportBtn">Eksportuj dane</button>
                    </div>

                    <div class="action-card">
                        <h3>Import danych</h3>
                        <p>Przywr√≥ƒá dane z pliku kopii zapasowej.</p>
                        <input type="file" id="importFile" accept=".json" style="display: none;">
                        <button class="btn btn-secondary" id="importBtn">Importuj dane</button>
                    </div>

                    <div class="action-card danger">
                        <h3>Resetuj dane lokalne</h3>
                        <p>Usuwa wszystkie lokalne dane. Nie wp≈Çywa na dane w Gist.</p>
                        <button class="btn btn-danger" id="resetBtn">Resetuj dane</button>
                    </div>

                    <div class="action-card warning">
                        <h3>Resetuj osiƒÖgniƒôcia</h3>
                        <p>Usuwa wszystkie zdobyte osiƒÖgniƒôcia (indywidualne i zespo≈Çowe).</p>
                        <button class="btn btn-warning" id="resetAchievementsBtn">Resetuj osiƒÖgniƒôcia</button>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>Zesp√≥≈Ç Wentylacji ¬© 2025</p>
        </footer>
    </div>

    <script src="js/data.js"></script>
    <script src="js/sync.js"></script>
    <script src="js/shop-items.js"></script>
    <script src="js/achievements.js"></script>
    <script src="js/settings.js"></script>
</body>
</html>
